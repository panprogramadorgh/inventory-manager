# Moves the header files

message(STATUS "Installing header files for libinvmanl.so at @INST_HEADERS_DESTINATION@")

file(GLOB_RECURSE headers "@CMAKE_CURRENT_SOURCE_DIR@/include/*.hpp")

# Creates / Empties headers manifest file
file(WRITE "@CMAKE_CURRENT_BINARY_DIR@/headers_manifest.txt")
message(STATUS "Creating headers manifest at @CMAKE_CURRENT_BINARY_DIR@/headers_manifest.txt")

foreach(file ${headers})
  # Copies the headers files
  file(COPY "${file}" DESTINATION "@INST_HEADERS_DESTINATION@")

  # Gets the header file name
  get_filename_component(filename ${file} NAME)

  # Writes each header path at manifest
  file(APPEND "@CMAKE_CURRENT_BINARY_DIR@/headers_manifest.txt" "@INST_HEADERS_DESTINATION@/${filename}\n")

  # Prints the name of the file
  message(STATUS "Installed @INST_HEADERS_DESTINATION@/${filename}")
endforeach()